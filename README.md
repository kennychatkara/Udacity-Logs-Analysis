# Logs Analysis App

**Description**
---------------
A logs analysis application working as an internal reporting tool for a newspaper website. This reporting tool is a Python app which connects to a PostgreSQL database to analyze the logs generated by the newspaper website. SQL queries are run against the log and site data to generate a report analyzing how users use the newspaper site.


**Download**
---------------
To download the project source code, simply clone the repository or download and extract the zip of the repository.

**System Requirements**
- Python 2.7+
- [VirtualBox](https://www.virtualbox.org/)
- [Vagrant](https://www.vagrantup.com/)

**Requirements Installation**
- To install [VirtualBox](https://www.virtualbox.org/wiki/Downloads), download and install the 'platform package' for your operating system
- To install [Vagrant](https://www.vagrantup.com/downloads.html), download and install the package for your operating system


**Setup**
---------------
Run the following command to run the PostgreSQL command-line utility and connect to the 'news' database:
```bash 
psql -d news
```

Run the following SQL queries to create the views used by this application:
```sql
# article_views - View for showing the number of views each article has received
CREATE VIEW article_views AS SELECT author, title, count FROM articles JOIN (SELECT substring(path from '/article/(.*)') as path_slug, count(*) FROM log WHERE path ~ '/article/*' AND status = '200 OK' GROUP BY path) AS views ON articles.slug = views.path_slug;

# request_count - View for showing the total number of requests the newspaper site received per day
CREATE VIEW request_count AS SELECT time::date, count(*) as requests FROM log GROUP BY time::date;

# error_count - View for showing the number of unsuccessful requests the newspaper site received per day
CREATE VIEW error_count AS SELECT time::date, count(*) AS errors FROM log WHERE status != '200 OK' GROUP BY time::date;
```


**Run**
---------------
To run the application, using Terminal, run 'python logs_analysis.py' **from within the VM** '/vagrant/logs_analysis' directory. The report will be printed in the Terminal console.
